<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø§ÛŒØ±Ø§Ù† ÙˆØ§Ø¨ÛŒ - Ø¨Ù‡ØªØ±ÛŒÙ† Ú©ÛŒÙÛŒØª Ø¨Ø§ Ø¨ØµØ±ÙÙ‡â€ŒØªØ±ÛŒÙ† Ù‚ÛŒÙ…Øª</title>
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />

  <!-- Manifest -->
  <link rel="manifest" href="manifest.json" />

  <!-- Theme color for mobile status bar -->
  <meta name="theme-color" content="#d32f2f">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font/dist/font-face.css" rel="stylesheet" />
  <style>
    body { font-family: 'Vazir', sans-serif; background-color: #f8f9fa; margin: 0; padding: 0; }
    header { background: linear-gradient(90deg, #FF0000, #ffffff); color: #000; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; }
    .btn-login { background:#fff; color:#FF0000; border:none; border-radius:5px; }
    .btn-login:hover { background:#e6e6e6; }
    .sidebar { background:#fff; padding:1rem; border-radius:10px; box-shadow:0 0 10px rgba(255, 0, 0, 0.1); margin-bottom:1rem; }
    .product-card { background:#fff; border-radius:10px; padding:1rem; box-shadow:0 0 10px rgba(252, 1, 1, 0.1); margin-bottom:1rem; text-align:center; }
    .product-card img { max-width:100%; border-radius:10px; margin-bottom:.5rem; }
    .footer { background:#ff0000; color:#fff; padding:1rem 0; text-align:center; }
    .footer a { color:#fff; margin:0 1rem; text-decoration:none; }
    .footer a:hover { color:#ffd900; }
    #cartIcon { position: relative; margin-right: 1rem; font-size: 24px; cursor: pointer; }
    #cartCount { position: absolute; top: -8px; right: -10px; background: red; color: white; border-radius: 50%; padding: 2px 6px; font-size: 12px; }
  </style>
</head>
<body>

  <!-- Header -->
  <header>
    <h1>Ø§ÛŒØ±Ø§Ù† ÙˆØ§Ø¨ÛŒ</h1>
    <button class="btn btn-login" data-bs-toggle="modal" data-bs-target="#loginModal">ÙˆØ±ÙˆØ¯ / Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
  </header>

  <!-- Main Content -->
  <div class="container-fluid mt-4">
    <div class="row">
      <!-- Sidebar Filters -->
      <div class="col-md-3">
        <div class="sidebar">
          <h5>ÙÛŒÙ„ØªØ± Ù‚ÛŒÙ…Øª</h5>
          <input type="range" class="form-range mb-1" min="0" max="1000000" step="10000" id="priceRange" />
          <p>ØªØ§ <span id="priceValue">1,000,000</span> ØªÙˆÙ…Ø§Ù†</p>
          <h5 class="mt-4">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</h5>
          <div id="categoryFilters"></div>
          <h5 class="mt-4">Ø¨Ø±Ù†Ø¯</h5>
          <div id="brandFilters"></div>
        </div>
      </div>

      <!-- Products -->
      <div class="col-md-9">
        <div class="row" id="productContainer">
          <!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø§ÛŒÙ†Ø¬Ø§ Ø®ÙˆØ§Ù‡Ù†Ø¯ Ø¢Ù…Ø¯ -->
        </div>
      </div>
    </div>
  </div>



  







  <!-- ÙØ±Ù… Ø§Ø±Ø³Ø§Ù„ ØªÛŒÚ©Øª Ø¨Ø§ Ù…Ù†ÙˆÛŒ Ø¨Ø§Ø²Ø´ÙˆÙ†Ø¯Ù‡ -->
<section class="form-section mb-4">
  <h4 class="mb-3 toggle-form" style="cursor: pointer;">
    <i class="bi bi-plus-circle me-1 toggle-icon"></i> Ø§Ø±Ø³Ø§Ù„ ØªÛŒÚ©Øª
  </h4>
  <div class="form-content" style="display: none;">
    <form id="ticketForm">
      <div class="mb-3">
        <label for="nameInput" class="form-label">Ù†Ø§Ù…</label>
        <input type="text" class="form-control" id="nameInput" required>
      </div>
      <div class="mb-3">
        <label for="subjectInput" class="form-label">Ù…ÙˆØ¶ÙˆØ¹</label>
        <input type="text" class="form-control" id="subjectInput" required>
      </div>
      <div class="mb-3">
        <label for="messageInput" class="form-label">Ù¾ÛŒØ§Ù…</label>
        <textarea class="form-control" id="messageInput" rows="4" required></textarea>
      </div>
      <button type="submit" class="btn btn-primary"><i class="bi bi-send me-1"></i> Ø§Ø±Ø³Ø§Ù„ ØªÛŒÚ©Øª</button>
    </form>
  </div>
</section>

<script>
  const toggleHeader = document.querySelector('.toggle-form');
  const formContent = document.querySelector('.form-content');
  const toggleIcon = document.querySelector('.toggle-icon');

  toggleHeader.addEventListener('click', () => {
    const isOpen = formContent.style.display === 'block';
    formContent.style.display = isOpen ? 'none' : 'block';
    toggleIcon.classList.toggle('bi-plus-circle', isOpen);
    toggleIcon.classList.toggle('bi-dash-circle', !isOpen);
  });
</script>



  <!-- Footer -->
  <footer class="footer mt-4">
    <a href="index.html">Ø®Ø§Ù†Ù‡</a>
    <a href="contact.html">ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</a>
    <a href="cart.html">ğŸ›’ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</a>
    <a href="about-us.html">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§</a>
  </footer>

<!-- Modal Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ù„Ø§Ú¯ÛŒÙ†/Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title">ÙˆØ±ÙˆØ¯ ÛŒØ§ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Ø¨Ø³ØªÙ†"></button>
      </div>
      <div class="modal-body">
        <ul class="nav nav-tabs mb-3" id="authTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#loginTab" type="button" role="tab">ÙˆØ±ÙˆØ¯</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#registerTab" type="button" role="tab">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
          </li>
        </ul>
        <div class="tab-content" id="authTabContent">
          <div class="tab-pane fade show active" id="loginTab" role="tabpanel">
            <form id="loginForm">
              <div class="mb-3">
                <label class="form-label">Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„</label>
                <input type="tel" id="loginMobile" class="form-control" required>
<div class="mb-3" id="adminPasswordGroup" style="display: none;">
  <label class="form-label">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
  <input type="password" id="adminPassword" class="form-control">
</div>

              </div>
              <button type="submit" class="btn btn-danger w-100">ÙˆØ±ÙˆØ¯</button>
            </form>
          </div>
          <div class="tab-pane fade" id="registerTab" role="tabpanel">
            <form id="registerForm">
              <div class="mb-3">
                <label class="form-label">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
                <input type="text" id="regFullName" class="form-control" required>
              </div>
              <div class="mb-3">
                <label class="form-label">Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„</label>
                <input type="tel" id="regMobile" class="form-control" required>
              </div>
              <div class="mb-3">
                <label class="form-label">Ù†Ø§Ù… Ù…ØºØ§Ø²Ù‡</label>
                <input type="text" id="regShop" class="form-control" required>
              </div>
              <div class="mb-3">
                <label class="form-label">Ø¢Ø¯Ø±Ø³ Ù…ØºØ§Ø²Ù‡</label>
                <textarea id="regAddress" class="form-control" required></textarea>
              </div>
              <div class="mb-3">
                <label class="form-label">Ù†Ù‚Ø´</label>
                <select id="regRole" class="form-select" required>
                  <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                  <option value="retail">Ø®Ø±Ø¯Ù‡ ÙØ±ÙˆØ´</option>
                  <option value="wholesale">Ø¹Ù…Ø¯Ù‡ ÙØ±ÙˆØ´</option>
                </select>
              </div>
              <button type="submit" class="btn btn-success w-100">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Login â†” Signup toggle
    const loginForm = 

document.getElementById("loginForm").addEventListener("submit", function(e) {
  e.preventDefault();
  const mobile = document.getElementById("loginMobile").value.trim();
  const adminMobile = "09127824705";
  const adminPassword = "Mm@09127824705m";

  if (mobile === adminMobile) {
    const passGroup = document.getElementById("adminPasswordGroup");
    passGroup.style.display = "block";

    const enteredPassword = document.getElementById("adminPassword").value.trim();
    if (enteredPassword === adminPassword) {
      localStorage.setItem("loggedInUser", JSON.stringify({ mobile: adminMobile }));
      alert("âœ… ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ±");
      window.location.href = "admin-dashboard.html";
    } else if (enteredPassword) {
      alert("âŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª");
    }
  } else {
    const users = JSON.parse(localStorage.getItem("users")) || [];
    const user = users.find(u => u.mobile === mobile);
    if (!user) {
      alert("Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¨Ø§ Ø§ÛŒÙ† Ø´Ù…Ø§Ø±Ù‡ ÛŒØ§ÙØª Ù†Ø´Ø¯");
      return;
    }
    localStorage.setItem("loggedInUser", JSON.stringify(user));
    alert("âœ… ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯");
    window.location.reload();
  }
});


    signupForm = document.getElementById("signup-form"),
    switchLink = document.getElementById("switchFormLink"),
    title = document.getElementById("modalTitle");
    switchLink.onclick = e => {
      e.preventDefault();
      if (loginForm.style.display !== "none") {
        loginForm.style.display = "none";
        signupForm.style.display = "block";
        title.innerText = "Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…";
        switchLink.innerText = "Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŸ ÙˆØ±ÙˆØ¯ Ú©Ù†ÛŒØ¯";
      } else {
        loginForm.style.display = "block";
        signupForm.style.display = "none";
        title.innerText = "ÙˆØ±ÙˆØ¯";
        switchLink.innerText = "Ø«Ø¨Øª Ù†Ø§Ù… Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯ØŸ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ù†ÛŒØ¯";
      }
    };
    window.addEventListener('load', ()=> new bootstrap.Modal(document.getElementById('loginModal')).show());

    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø§Ø² localStorage
    const products  = JSON.parse(localStorage.getItem('products'))   || [];
    const categories= JSON.parse(localStorage.getItem('categories')) || [];
    const brands    = JSON.parse(localStorage.getItem('brands'))     || [];

    // Ø±Ù†Ø¯Ø± ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
    const catDiv = document.getElementById('categoryFilters');
    categories.forEach(cat => {
      catDiv.innerHTML += `
        <div class="form-check mb-1">
          <input class="form-check-input" type="checkbox" value="${cat}" id="cat-${cat}">
          <label class="form-check-label" for="cat-${cat}">${cat}</label>
        </div>`;
    });
    // Ø±Ù†Ø¯Ø± ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ø¨Ø±Ù†Ø¯
    const brDiv = document.getElementById('brandFilters');
    brands.forEach(br => {
      brDiv.innerHTML += `
        <div class="form-check mb-1">
          <input class="form-check-input" type="checkbox" value="${br}" id="br-${br}">
          <label class="form-check-label" for="br-${br}">${br}</label>
        </div>`;
    });

    // Ú©Ù†ØªØ±Ù„ Ù‚ÛŒÙ…Øª
    const priceRange = document.getElementById('priceRange'),
          priceValue = document.getElementById('priceValue');
    priceRange.oninput = ()=> priceValue.innerText = Number(priceRange.value).toLocaleString();

    // ØªØ§Ø¨Ø¹ Ø±Ù†Ø¯Ø± Ù…Ø­ØµÙˆÙ„Ø§Øª
    function render() {
  const cont = document.getElementById('productContainer');
  cont.innerHTML = '';
  const selCats = [...catDiv.querySelectorAll('input:checked')].map(i=>i.value);
  const selBrs  = [...brDiv.querySelectorAll('input:checked')].map(i=>i.value);
  const maxP    = +priceRange.value;
  const loggedInUser = JSON.parse(localStorage.getItem("loggedInUser"));

  products.forEach(p => {
    if ((selCats.length && !selCats.includes(p.category)) ||
        (selBrs.length && !selBrs.includes(p.brand)) ||
        (+p.retailPrice > maxP)) return;

    let price = "Ù†Ø§Ù…Ø´Ø®Øµ";
    if (loggedInUser?.role === "retail") {
      price = Number(p.retailPrice).toLocaleString() + " ØªÙˆÙ…Ø§Ù†";
    } else if (loggedInUser?.role === "wholesale") {
      price = Number(p.wholesalePrice).toLocaleString() + " ØªÙˆÙ…Ø§Ù†";
    }

    cont.innerHTML += `
      <div class="col-md-4">
        <div class="product-card">
          <img src="${p.image||'placeholder.jpg'}" alt="${p.name}">
          <h5>${p.name}</h5>
          <p>Ù‚ÛŒÙ…Øª: ${price}</p>
          <button class="btn btn-danger">Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</button>
        </div>
      </div>`;
  });
}
  if (!cont.innerHTML) cont.innerHTML = `<p class="text-center w-100">Ù‡ÛŒÚ† Ù…Ø­ØµÙˆÙ„ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.</p>`;
    

    // Ù„ÛŒØ³Ù†Ø±Ù‡Ø§
    priceRange.addEventListener('input', render);
    catDiv.addEventListener('change', render);
    brDiv.addEventListener('change', render);

    // Ø§Ø¬Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
    render();

// ÙˆØ±ÙˆØ¯ Ùˆ Ø°Ø®ÛŒØ±Ù‡ Ú©Ø§Ø±Ø¨Ø± ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡
loginForm.addEventListener('submit', function(e) {
  e.preventDefault();
  const mobile = document.getElementById("mobile").value.trim();
  const password = document.getElementById("password").value.trim();

  const users = JSON.parse(localStorage.getItem("users")) || [];
  const user = users.find(u => u.mobile === mobile && u.password === password);

  if (user) {
    localStorage.setItem("loggedInUser", JSON.stringify(user));
    alert("ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚!");
    location.reload();
  } else {
    alert("Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª");
  }
});

const header = document.querySelector("header");
const loggedInUser = JSON.parse(localStorage.getItem("loggedInUser"));
if (loggedInUser) {
  const roleLabel = loggedInUser.role === "retail" ? "Ù…ØºØ§Ø²Ù‡â€ŒØ¯Ø§Ø±" : "Ø¹Ù…Ø¯Ù‡â€ŒÙØ±ÙˆØ´";
  header.innerHTML += `<span style="margin-right:1rem;">ğŸ‘¤ Ù†Ù‚Ø´ Ø´Ù…Ø§: ${roleLabel}</span>`;
}



    // Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¯Ø± localStorage Ù‡Ù†Ú¯Ø§Ù… Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…
signupForm.addEventListener('submit', function(e) {
  e.preventDefault();

  const shopName = signupForm.elements[0].value.trim();
  const shopAddress = signupForm.elements[1].value.trim();
  const mobile = signupForm.elements[2].value.trim();
  const password = signupForm.elements[3].value.trim();
  const role = signupForm.querySelector('input[name="userRole"]:checked')?.value;

  const fullName = "Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯";

  const users = JSON.parse(localStorage.getItem("users")) || [];
  users.push({ fullName, shopName, shopAddress, role, mobile, password });
  localStorage.setItem("users", JSON.stringify(users));

  alert("Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!");
  document.getElementById('loginModal').querySelector('.btn-close').click();
});

</script>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js"></script>

<!-- Ø§ØªØµØ§Ù„ Ù¾Ø±ÙˆÚ˜Ù‡ -->
<script src="firebase.js"></script>

<!-- Ø³ÛŒØ³ØªÙ… ÙˆØ±ÙˆØ¯ Ùˆ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… -->
<script src="login-register.js"></script>

  
</body>
</html>
